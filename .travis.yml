language: node_js
node_js:
  - '8'
  - '10'

notifications:
  email:
    on_success: never
    on_failure: always

script: yarn build

deploy:
  provider: npm
  email: npm@jupiterone.io
  api_key:
    secure: "mxACYSkWUW7JfAkUC1KCfd8uoAZrgGGuGrcXuqEIjTvHqgRCgSXwWBnQfmqu3X9X3op6W77fomHIAtu0FbD/ykdTwLCddreOcattiR2gMUASOX6bvbB27n+fi78gbR3/PXhAyZ0m2cuLzHQ5Z5M9IkMzNfi+atLIzprMUG4ZFdWWHBpg42i7kCtL4cSDQfMs47LhDAX/eiEQYpGAIYX2IIIGgAHAFgN1r+S5euDE6cSu1h+ygPRrE2V2oiAezZRrqpCZdepU1ZRNakh34M6xfVegpWadQCj1Q5ImmuYMSls2dT1cVZQl7HLIiWwTHHxTB4yHU8mvQ99M4b5kjQoj/FAvSy5KJ2lwPEYPiVur0806hh66OLjZ0waQpX9th8X/nNcDakdh0jaDkEPK8cQDdEe3e7Llq6IDA6RFisxWRXQtre4wf26EMF8V2JnP4Qmbnb1tfluAw73TYCnJccy41ZeWicBqDYMX6bAdpzu0zLZ+O0drdhFMwkzCefHoDGNowxDgZjiUHOLKSjkxPeWw4ddshojMgScQ4fiR66AnwYZbWqhRQL06YnLd14qLaVRbEqek/kc2qCzFUlhwKVAXzG53rZg/5q89tZJ8KdcCF+8nxi/NnOLkm4LmQmwbo+EtJhnllXbIHN/5jZDHZLu338aw5ozFrJ7ZFqHkFHW8TCc="
  skip_cleanup: true
  on:
    tags: true
    branch: master
    repo: JupiterOne/graph-cbdefense
    node: '8'
